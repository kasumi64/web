<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MySql手册 | 开发手册</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/web/handbooks/assets/OneNote Notebooks.png">
    <link rel="apple-touch-icon" href="/web/handbooks/assets/OneNote Notebooks.png" sizes="72x72">
    <link rel="mask-icon" href="/web/handbooks/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="开发手册，语法手记，环境搭建">
    <meta property="og:url" content="/guide/MySql.html">
    <meta property="og:site_name" content="开发手册">
    <meta property="og:title" content="MySql手册">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="en-US">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image:alt" content="开发手册">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/web/handbooks/assets/css/0.styles.92ed05f9.css" as="style"><link rel="preload" href="/web/handbooks/assets/js/app.34fee4e2.js" as="script"><link rel="preload" href="/web/handbooks/assets/js/layout-Layout.e2428f23.js" as="script"><link rel="preload" href="/web/handbooks/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.6b13e837.js" as="script"><link rel="preload" href="/web/handbooks/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-Slide.2463fd57.js" as="script"><link rel="preload" href="/web/handbooks/assets/js/vendors~layout-Blog~layout-Layout.80e40fa9.js" as="script"><link rel="preload" href="/web/handbooks/assets/js/page-MySql手册--2b8d6df0.0579fdb9.js" as="script"><link rel="prefetch" href="/web/handbooks/assets/js/44.511c057e.js"><link rel="prefetch" href="/web/handbooks/assets/js/45.686a33aa.js"><link rel="prefetch" href="/web/handbooks/assets/js/46.547c1531.js"><link rel="prefetch" href="/web/handbooks/assets/js/47.161400a9.js"><link rel="prefetch" href="/web/handbooks/assets/js/48.ffa56e4a.js"><link rel="prefetch" href="/web/handbooks/assets/js/49.443ad282.js"><link rel="prefetch" href="/web/handbooks/assets/js/layout-Blog.50b4ca94.js"><link rel="prefetch" href="/web/handbooks/assets/js/layout-NotFound.cdaf11ac.js"><link rel="prefetch" href="/web/handbooks/assets/js/layout-Slide.990633eb.js"><link rel="prefetch" href="/web/handbooks/assets/js/page-About--8eaf4b22.f5f01af2.js"><link rel="prefetch" href="/web/handbooks/assets/js/page-Array数组--01456e5e.51ed83f8.js"><link rel="prefetch" href="/web/handbooks/assets/js/page-Boolean布尔值--f27b829a.aa2915fc.js"><link rel="prefetch" href="/web/handbooks/assets/js/page-Browser浏览器对象--434240b3.25616f9b.js"><link rel="prefetch" href="/web/handbooks/assets/js/page-Cordova应用流程--2213e961.89acb8f6.js"><link rel="prefetch" href="/web/handbooks/assets/js/page-Date日期时间--8a4d2046.a0be5b07.js"><link rel="prefetch" href="/web/handbooks/assets/js/page-Electron桌面应用--d04b6fd2.576bc9ad.js"><link rel="prefetch" href="/web/handbooks/assets/js/page-Events事件--4c5e2986.0646bea0.js"><link rel="prefetch" href="/web/handbooks/assets/js/page-Function函数--cf4504c6.5b37d87f.js"><link rel="prefetch" href="/web/handbooks/assets/js/page-Git常用命令大全--655cb23c.69dfc1e0.js"><link rel="prefetch" href="/web/handbooks/assets/js/page-Global全局函数--1f0763fd.727120f9.js"><link rel="prefetch" href="/web/handbooks/assets/js/page-H5的桌面应用打包工具--730675d8.80f39607.js"><link rel="prefetch" href="/web/handbooks/assets/js/page-HBuilderMarkdown语法大纲--6263d792.3d91cc5b.js"><link rel="prefetch" href="/web/handbooks/assets/js/page-Home--f4f55a84.98592ab4.js"><link rel="prefetch" href="/web/handbooks/assets/js/page-JavaScript常用新特性--a1780ec6.4f22938d.js"><link rel="prefetch" href="/web/handbooks/assets/js/page-JavaScript核心参考手册--1d2724e4.6df80b55.js"><link rel="prefetch" href="/web/handbooks/assets/js/page-Linux手册--1f3bfc30.da67a4b5.js"><link rel="prefetch" href="/web/handbooks/assets/js/page-Markdown语法--9f3f0690.3eb33045.js"><link rel="prefetch" href="/web/handbooks/assets/js/page-Math数学函数--3c01cd1d.791bd197.js"><link rel="prefetch" href="/web/handbooks/assets/js/page-MySql增删改查--26ee233d.970a9bbd.js"><link rel="prefetch" href="/web/handbooks/assets/js/page-Node-MySQL官方文档--810d1eb0.e4ae1425.js"><link rel="prefetch" href="/web/handbooks/assets/js/page-Number数字--6c79d53d.b14d5cfe.js"><link rel="prefetch" href="/web/handbooks/assets/js/page-Object对像--bbbee706.08a06b8b.js"><link rel="prefetch" href="/web/handbooks/assets/js/page-React-App--3e87f348.dd71b5a0.js"><link rel="prefetch" href="/web/handbooks/assets/js/page-RegExp正则表达式--67ea7d86.568861b0.js"><link rel="prefetch" href="/web/handbooks/assets/js/page-String字符串--4b13043d.752b85a2.js"><link rel="prefetch" href="/web/handbooks/assets/js/page-VisualStudioCode相关插件与配置--7ca3068a.35426bc4.js"><link rel="prefetch" href="/web/handbooks/assets/js/page-Vue-Cli--0b9e0558.a4471872.js"><link rel="prefetch" href="/web/handbooks/assets/js/page-代码风格--77d10918.ac8794d8.js"><link rel="prefetch" href="/web/handbooks/assets/js/page-包管理工具--7f12d98a.b794d42e.js"><link rel="prefetch" href="/web/handbooks/assets/js/page-数据库--91c4eb64.7b5a88dd.js"><link rel="prefetch" href="/web/handbooks/assets/js/vendors~flowchart.10982a0f.js"><link rel="prefetch" href="/web/handbooks/assets/js/vendors~photo-swipe.e19a2e69.js"><link rel="prefetch" href="/web/handbooks/assets/js/vendors~reveal.63bf05c9.js">
    <link rel="stylesheet" href="/web/handbooks/assets/css/0.styles.92ed05f9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container has-anchor"><header class="navbar"><button class="sidebar-button"><span class="icon"></span></button> <a href="/web/handbooks/" class="home-link router-link-active"><img src="/web/handbooks/assets/Scrapbook.png" alt="开发手册" class="logo"> <!----> <span class="site-name can-hide">开发手册</span></a> <div class="links"><button class="color-button"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="skin-icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4
        38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32
        51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0
        102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2
        6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4
        0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2
        9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224
        419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4
        470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0
        22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6
        12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128
        505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2
        16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8
        86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4
        80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6
        6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><ul class="themecolor-select"><label for="themecolor-select">Theme Color:</label> <li><a href="#" class="default-theme"></a></li> </ul> <div class="darkmode-toggle"><label for="darkmode-toggle" class="desc">Theme Mode:</label> <div class="darkmode-switch"><div class="item day"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon light-icon"><path d="M512 256a42.667 42.667 0 0042.667-42.667V128a42.667 42.667 0 00-85.334 0v85.333A42.667 42.667 0 00512 256zm384 213.333h-85.333a42.667 42.667 0 000 85.334H896a42.667 42.667 0 000-85.334zM256 512a42.667 42.667 0 00-42.667-42.667H128a42.667 42.667 0 000 85.334h85.333A42.667 42.667 0 00256 512zm9.387-298.667a42.667 42.667 0 00-59.307 62.72l61.44 59.307a42.667 42.667 0 0031.147 11.947 42.667 42.667 0 0030.72-13.227 42.667 42.667 0 000-60.16zm459.946 133.974a42.667 42.667 0 0029.44-11.947l61.44-59.307a42.667 42.667 0 00-57.6-62.72l-61.44 60.587a42.667 42.667 0 000 60.16 42.667 42.667 0 0028.16 13.227zM512 768a42.667 42.667 0 00-42.667 42.667V896a42.667 42.667 0 0085.334 0v-85.333A42.667 42.667 0 00512 768zm244.48-79.36a42.667 42.667 0 00-59.307 61.44l61.44 60.587a42.667 42.667 0 0029.44 11.946 42.667 42.667 0 0030.72-12.8 42.667 42.667 0 000-60.586zm-488.96 0l-61.44 59.307a42.667 42.667 0 000 60.586 42.667 42.667 0 0030.72 12.8 42.667 42.667 0 0028.587-10.666l61.44-59.307a42.667 42.667 0 00-59.307-61.44zM512 341.333A170.667 170.667 0 10682.667 512 170.667 170.667 0 00512 341.333z" fill="currentColor"></path></svg></div> <div class="item auto active"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon auto-icon"><path d="M460.864 539.072H564.8L510.592 376l-49.728 163.072zM872 362.368V149.504H659.648L510.528 0l-149.12 149.504H149.12v212.928L0 511.872l149.12 149.504v212.928h212.352l149.12 149.504 149.12-149.504h212.352V661.376l149.12-149.504L872 362.368zM614.464 693.12l-31.616-90.624H438.272l-31.616 90.624h-85.888l144.576-407.68h90.368l144.576 407.68h-85.824zm0 0" fill="currentColor"></path></svg></div> <div class="item night"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon dark-icon"><path d="M935.539 630.402c-11.43-11.432-28.674-14.739-43.531-8.354-46.734 20.103-96.363 30.297-147.508 30.297-99.59 0-193.221-38.784-263.64-109.203-108.637-108.637-139.61-270.022-78.908-411.148a39.497 39.497 0 00-51.886-51.887c-52.637 22.64-100.017 54.81-140.826 95.616-85.346 85.346-132.346 198.821-132.346 319.52 0 120.7 47.001 234.172 132.347 319.519S408.063 947.11 528.76 947.11c120.7 0 234.172-47.003 319.52-132.351 40.809-40.81 72.978-88.19 95.616-140.826a39.497 39.497 0 00-8.356-43.532z" fill="currentColor"></path></svg></div></div> <!----></div></div></div></button> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title"><!---->
      API
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title"><!---->
      API
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web/handbooks/api/JavaScript/" class="nav-link"><!---->
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/web/handbooks/api/database/" class="nav-link"><!---->
  数据库
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Guide" class="dropdown-title"><span class="title"><!---->
      Guide
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="Guide" class="mobile-dropdown-title"><span class="title"><!---->
      Guide
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/web/handbooks/guide/MySql.html" class="nav-link"><!---->
  MySql手册
</a></li><li class="dropdown-subitem"><a href="/web/handbooks/guide/Node-MySQL.html" class="nav-link"><!---->
  Node-MySQL
</a></li></ul></li><li class="dropdown-item"><!----> <a href="/web/handbooks/guide/linux.html" class="nav-link"><!---->
  Linux语法
</a></li><li class="dropdown-item"><!----> <a href="/web/handbooks/guide/markdown.html" class="nav-link"><!---->
  Markdown语法
</a></li><li class="dropdown-item"><!----> <a href="/web/handbooks/guide/HBuilderMarkdown.html" class="nav-link"><!---->
  HBuilderX (MD)
</a></li><li class="dropdown-item"><!----> <a href="/web/handbooks/guide/ESLint.html" class="nav-link"><!---->
  ESLint
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🛠 搭建" class="dropdown-title"><span class="title"><!---->
      🛠 搭建
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="🛠 搭建" class="mobile-dropdown-title"><span class="title"><!---->
      🛠 搭建
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web/handbooks/deploy/desktop/" class="nav-link"><!---->
  桌面应用
</a></li><li class="dropdown-item"><!----> <a href="/web/handbooks/deploy/git.html" class="nav-link"><!---->
  Git
</a></li><li class="dropdown-item"><!----> <a href="/web/handbooks/deploy/npm-yarn.html" class="nav-link"><!---->
  npm与yarn
</a></li><li class="dropdown-item"><!----> <a href="/web/handbooks/deploy/vue-cli.html" class="nav-link"><!---->
  Vue-cli
</a></li><li class="dropdown-item"><!----> <a href="/web/handbooks/deploy/react.html" class="nav-link"><!---->
  React-cli
</a></li><li class="dropdown-item"><!----> <a href="/web/handbooks/deploy/vsCode.html" class="nav-link"><!---->
  VSCode
</a></li></ul></div></div><div class="nav-item"><a href="/web/handbooks/about/" class="nav-link"><!---->
  About
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title"><!---->
      API
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title"><!---->
      API
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web/handbooks/api/JavaScript/" class="nav-link"><!---->
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/web/handbooks/api/database/" class="nav-link"><!---->
  数据库
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Guide" class="dropdown-title"><span class="title"><!---->
      Guide
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="Guide" class="mobile-dropdown-title"><span class="title"><!---->
      Guide
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/web/handbooks/guide/MySql.html" class="nav-link"><!---->
  MySql手册
</a></li><li class="dropdown-subitem"><a href="/web/handbooks/guide/Node-MySQL.html" class="nav-link"><!---->
  Node-MySQL
</a></li></ul></li><li class="dropdown-item"><!----> <a href="/web/handbooks/guide/linux.html" class="nav-link"><!---->
  Linux语法
</a></li><li class="dropdown-item"><!----> <a href="/web/handbooks/guide/markdown.html" class="nav-link"><!---->
  Markdown语法
</a></li><li class="dropdown-item"><!----> <a href="/web/handbooks/guide/HBuilderMarkdown.html" class="nav-link"><!---->
  HBuilderX (MD)
</a></li><li class="dropdown-item"><!----> <a href="/web/handbooks/guide/ESLint.html" class="nav-link"><!---->
  ESLint
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🛠 搭建" class="dropdown-title"><span class="title"><!---->
      🛠 搭建
    </span> <span class="arrow down"></span></button> <button type="button" aria-label="🛠 搭建" class="mobile-dropdown-title"><span class="title"><!---->
      🛠 搭建
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/web/handbooks/deploy/desktop/" class="nav-link"><!---->
  桌面应用
</a></li><li class="dropdown-item"><!----> <a href="/web/handbooks/deploy/git.html" class="nav-link"><!---->
  Git
</a></li><li class="dropdown-item"><!----> <a href="/web/handbooks/deploy/npm-yarn.html" class="nav-link"><!---->
  npm与yarn
</a></li><li class="dropdown-item"><!----> <a href="/web/handbooks/deploy/vue-cli.html" class="nav-link"><!---->
  Vue-cli
</a></li><li class="dropdown-item"><!----> <a href="/web/handbooks/deploy/react.html" class="nav-link"><!---->
  React-cli
</a></li><li class="dropdown-item"><!----> <a href="/web/handbooks/deploy/vsCode.html" class="nav-link"><!---->
  VSCode
</a></li></ul></div></div><div class="nav-item"><a href="/web/handbooks/about/" class="nav-link"><!---->
  About
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/web/handbooks/guide/MySql/" aria-current="page" class="sidebar-heading clickable router-link-exact-active router-link-active open active"><!----> <span>数据库</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/web/handbooks/guide/MySql/" aria-current="page" class="active sidebar-link">MySql手册</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#常用数据类型" class="sidebar-link">常用数据类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#char-和-varchar-的区别" class="sidebar-link">CHAR 和 VARCHAR 的区别？</a></li></ul></li><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#索引" class="sidebar-link">索引</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#优势" class="sidebar-link">优势</a></li><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#劣势" class="sidebar-link">劣势</a></li></ul></li><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#nodejs-连接-mysql" class="sidebar-link">Nodejs 连接 MySql</a></li><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#mysql-的增删改查" class="sidebar-link">MySql 的增删改查</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#插入数据" class="sidebar-link">插入数据</a></li><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#删除数据" class="sidebar-link">删除数据</a></li><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#修改" class="sidebar-link">修改</a></li></ul></li><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#mysql-查询" class="sidebar-link">MySQL 查询</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#count-和-count-1-和-count-列名-区别" class="sidebar-link">count(*)  和  count(1) 和 count(列名) 区别</a></li><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#mysql中-in-和-exists-的区别" class="sidebar-link">MySQL中  in 和 exists 的区别？</a></li><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#union-和-union-all-的区别" class="sidebar-link">UNION 和 UNION ALL 的区别?</a></li><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#sql执行顺序" class="sidebar-link">SQL执行顺序</a></li></ul></li><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#性能优化" class="sidebar-link">性能优化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#索引优化" class="sidebar-link">索引优化</a></li><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#一般性建议" class="sidebar-link">一般性建议</a></li><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#查询优化" class="sidebar-link">查询优化</a></li><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#order-by关键字优化" class="sidebar-link">ORDER BY关键字优化</a></li><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#group-by关键字优化" class="sidebar-link">GROUP BY关键字优化</a></li><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#数据类型优化" class="sidebar-link">数据类型优化</a></li><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#条件查询" class="sidebar-link">条件查询</a></li><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#模糊查询" class="sidebar-link">模糊查询</a></li><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#不重复" class="sidebar-link">不重复</a></li><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#排序" class="sidebar-link">排序</a></li><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#多表查询" class="sidebar-link">多表查询</a></li><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#union-any-all" class="sidebar-link">union, any, all</a></li><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#复制条件查询" class="sidebar-link">复制条件查询</a></li></ul></li><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#分页" class="sidebar-link">分页</a></li><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#函数" class="sidebar-link">函数</a></li><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#外键" class="sidebar-link">外键</a></li><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#连表查询" class="sidebar-link">连表查询</a></li><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#子查询" class="sidebar-link">子查询</a></li><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#建表字段约束" class="sidebar-link">建表字段约束</a></li><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#数据库的三大设计范式" class="sidebar-link">数据库的三大设计范式</a></li><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#事务" class="sidebar-link">事务</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#begin-或者-start-transaction-可以帮我们开启一个事务" class="sidebar-link">begin; 或者 start transaction; 可以帮我们开启一个事务；</a></li><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#事务的四大特征" class="sidebar-link">事务的四大特征：</a></li></ul></li><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#安装" class="sidebar-link">安装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#数据库可视化工具" class="sidebar-link">数据库可视化工具</a></li></ul></li><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#端口" class="sidebar-link">端口</a></li><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#将mysql安装到d盘后如何启动" class="sidebar-link">将mysql安装到D盘后如何启动</a></li><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#mysql架构" class="sidebar-link">MySQL架构</a></li><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#存储引擎" class="sidebar-link">存储引擎</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#查看存储引擎" class="sidebar-link">查看存储引擎</a></li><li class="sidebar-sub-header"><a href="/web/handbooks/guide/MySql/#设置存储引擎" class="sidebar-link">设置存储引擎</a></li></ul></li></ul></li><li><a href="/web/handbooks/guide/Node-MySQL/" class="sidebar-link">Node-MySQL</a></li></ul></section></li><li><a href="/web/handbooks/guide/linux/" class="sidebar-link">Linux语法</a></li><li><a href="/web/handbooks/guide/markdown/" class="sidebar-link">Markdown语法</a></li><li><a href="/web/handbooks/guide/HBuilderMarkdown/" class="sidebar-link">HBuilderX (MD)</a></li><li><a href="/web/handbooks/guide/ESLint/" class="sidebar-link">ESLint</a></li></ul> </aside> <main class="page"><nav class="breadcrumb disable"><!----></nav>  <div class="page-title"><h1><!---->
    MySql手册
  </h1> <div class="page-info"><!----> <!----><span aria-label="Page views🔢" data-balloon-pos="down" class="visitor-info"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon eye-icon"><path d="M992 512.096c0-5.76-.992-10.592-1.28-11.136-.192-2.88-1.152-8.064-2.08-10.816-.256-.672-.544-1.376-.832-2.08-.48-1.568-1.024-3.104-1.6-4.32C897.664 290.112 707.104 160 512 160c-195.072 0-385.632 130.016-473.76 322.592-1.056 2.112-1.792 4.096-2.272 5.856a55.512 55.512 0 00-.64 1.6c-1.76 5.088-1.792 8.64-1.632 7.744-.832 3.744-1.568 11.168-1.568 11.168-.224 2.272-.224 4.032.032 6.304 0 0 .736 6.464 1.088 7.808.128 1.824.576 4.512 1.12 6.976h-.032c.448 2.08 1.12 4.096 1.984 6.08.48 1.536.992 2.976 1.472 4.032C126.432 733.856 316.992 864 512 864c195.136 0 385.696-130.048 473.216-321.696 1.376-2.496 2.24-4.832 2.848-6.912.256-.608.48-1.184.672-1.728 1.536-4.48 1.856-8.32 1.728-8.32l-.032.032c.608-3.104 1.568-7.744 1.568-13.28zM512 672c-88.224 0-160-71.776-160-160s71.776-160 160-160 160 71.776 160 160-71.776 160-160 160z" fill="currentColor"></path></svg> <span id="/web/handbooks/guide/MySql/" data-flag-title="MySql手册" class="leancloud_visitors"><span class="leancloud-visitors-count">...</span></span></span><!----><!----><!----><span aria-label="Reading Time⌛" data-balloon-pos="down" class="read-time-info"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon time-icon"><path d="M511.997 70.568c-243.797 0-441.429 197.633-441.429 441.435 0 243.797 197.632 441.429 441.43 441.429S953.431 755.8 953.431 512.002c0-243.796-197.637-441.434-441.435-441.434zm150.158 609.093l-15.605 15.61c-8.621 8.615-22.596 8.615-31.215 0L472.197 552.126c-4.95-4.944-4.34-14.888-4.34-24.677V247.14c0-12.19 9.882-22.07 22.07-22.07h22.07c12.19 0 22.07 9.882 22.07 22.07v273.218l128.088 128.088c8.62 8.62 8.62 22.595 0 31.215zm0 0" fill="currentColor"></path></svg> <span>About 23 min</span></span></div> <hr></div> <!----> <div class="anchor-place-holder"><aside id="anchor"><div class="anchor-wrapper"><ul class="anchor-list"><li class="anchor anchor2"><a href="/web/handbooks/guide/MySql/#常用数据类型" class="anchor-link"><div>常用数据类型</div></a><ul class="anchor-list"><li class="anchor anchor3"><a href="/web/handbooks/guide/MySql/#char-和-varchar-的区别" class="anchor-link"><div>CHAR 和 VARCHAR 的区别？</div></a></li></ul></li><li class="anchor anchor2"><a href="/web/handbooks/guide/MySql/#索引" class="anchor-link"><div>索引</div></a><ul class="anchor-list"><li class="anchor anchor3"><a href="/web/handbooks/guide/MySql/#优势" class="anchor-link"><div>优势</div></a></li><li class="anchor anchor3"><a href="/web/handbooks/guide/MySql/#劣势" class="anchor-link"><div>劣势</div></a></li></ul></li><li class="anchor anchor2"><a href="/web/handbooks/guide/MySql/#nodejs-连接-mysql" class="anchor-link"><div>Nodejs 连接 MySql</div></a></li><li class="anchor anchor2"><a href="/web/handbooks/guide/MySql/#mysql-的增删改查" class="anchor-link"><div>MySql 的增删改查</div></a><ul class="anchor-list"><li class="anchor anchor3"><a href="/web/handbooks/guide/MySql/#插入数据" class="anchor-link"><div>插入数据</div></a></li><li class="anchor anchor3"><a href="/web/handbooks/guide/MySql/#删除数据" class="anchor-link"><div>删除数据</div></a></li><li class="anchor anchor3"><a href="/web/handbooks/guide/MySql/#修改" class="anchor-link"><div>修改</div></a></li></ul></li><li class="anchor anchor2"><a href="/web/handbooks/guide/MySql/#mysql-查询" class="anchor-link"><div>MySQL 查询</div></a><ul class="anchor-list"><li class="anchor anchor3"><a href="/web/handbooks/guide/MySql/#count-和-count-1-和-count-列名-区别" class="anchor-link"><div>count(*)  和  count(1) 和 count(列名) 区别</div></a></li><li class="anchor anchor3"><a href="/web/handbooks/guide/MySql/#mysql中-in-和-exists-的区别" class="anchor-link"><div>MySQL中  in 和 exists 的区别？</div></a></li><li class="anchor anchor3"><a href="/web/handbooks/guide/MySql/#union-和-union-all-的区别" class="anchor-link"><div>UNION 和 UNION ALL 的区别?</div></a></li><li class="anchor anchor3"><a href="/web/handbooks/guide/MySql/#sql执行顺序" class="anchor-link"><div>SQL执行顺序</div></a></li></ul></li><li class="anchor anchor2"><a href="/web/handbooks/guide/MySql/#性能优化" class="anchor-link"><div>性能优化</div></a><ul class="anchor-list"><li class="anchor anchor3"><a href="/web/handbooks/guide/MySql/#索引优化" class="anchor-link"><div>索引优化</div></a></li><li class="anchor anchor3"><a href="/web/handbooks/guide/MySql/#一般性建议" class="anchor-link"><div>一般性建议</div></a></li><li class="anchor anchor3"><a href="/web/handbooks/guide/MySql/#查询优化" class="anchor-link"><div>查询优化</div></a></li><li class="anchor anchor3"><a href="/web/handbooks/guide/MySql/#order-by关键字优化" class="anchor-link"><div>ORDER BY关键字优化</div></a></li><li class="anchor anchor3"><a href="/web/handbooks/guide/MySql/#group-by关键字优化" class="anchor-link"><div>GROUP BY关键字优化</div></a></li><li class="anchor anchor3"><a href="/web/handbooks/guide/MySql/#数据类型优化" class="anchor-link"><div>数据类型优化</div></a></li><li class="anchor anchor3"><a href="/web/handbooks/guide/MySql/#条件查询" class="anchor-link"><div>条件查询</div></a></li><li class="anchor anchor3"><a href="/web/handbooks/guide/MySql/#模糊查询" class="anchor-link"><div>模糊查询</div></a></li><li class="anchor anchor3"><a href="/web/handbooks/guide/MySql/#不重复" class="anchor-link"><div>不重复</div></a></li><li class="anchor anchor3"><a href="/web/handbooks/guide/MySql/#排序" class="anchor-link"><div>排序</div></a></li><li class="anchor anchor3"><a href="/web/handbooks/guide/MySql/#多表查询" class="anchor-link"><div>多表查询</div></a></li><li class="anchor anchor3"><a href="/web/handbooks/guide/MySql/#union-any-all" class="anchor-link"><div>union, any, all</div></a></li><li class="anchor anchor3"><a href="/web/handbooks/guide/MySql/#复制条件查询" class="anchor-link"><div>复制条件查询</div></a></li></ul></li><li class="anchor anchor2"><a href="/web/handbooks/guide/MySql/#分页" class="anchor-link"><div>分页</div></a></li><li class="anchor anchor2"><a href="/web/handbooks/guide/MySql/#函数" class="anchor-link"><div>函数</div></a></li><li class="anchor anchor2"><a href="/web/handbooks/guide/MySql/#外键" class="anchor-link"><div>外键</div></a></li><li class="anchor anchor2"><a href="/web/handbooks/guide/MySql/#连表查询" class="anchor-link"><div>连表查询</div></a></li><li class="anchor anchor2"><a href="/web/handbooks/guide/MySql/#子查询" class="anchor-link"><div>子查询</div></a></li><li class="anchor anchor2"><a href="/web/handbooks/guide/MySql/#建表字段约束" class="anchor-link"><div>建表字段约束</div></a></li><li class="anchor anchor2"><a href="/web/handbooks/guide/MySql/#数据库的三大设计范式" class="anchor-link"><div>数据库的三大设计范式</div></a></li><li class="anchor anchor2"><a href="/web/handbooks/guide/MySql/#事务" class="anchor-link"><div>事务</div></a><ul class="anchor-list"><li class="anchor anchor3"><a href="/web/handbooks/guide/MySql/#begin-或者-start-transaction-可以帮我们开启一个事务" class="anchor-link"><div>begin; 或者 start transaction; 可以帮我们开启一个事务；</div></a></li><li class="anchor anchor3"><a href="/web/handbooks/guide/MySql/#事务的四大特征" class="anchor-link"><div>事务的四大特征：</div></a></li></ul></li><li class="anchor anchor2"><a href="/web/handbooks/guide/MySql/#安装" class="anchor-link"><div>安装</div></a><ul class="anchor-list"><li class="anchor anchor3"><a href="/web/handbooks/guide/MySql/#数据库可视化工具" class="anchor-link"><div>数据库可视化工具</div></a></li></ul></li><li class="anchor anchor2"><a href="/web/handbooks/guide/MySql/#端口" class="anchor-link"><div>端口</div></a></li><li class="anchor anchor2"><a href="/web/handbooks/guide/MySql/#将mysql安装到d盘后如何启动" class="anchor-link"><div>将mysql安装到D盘后如何启动</div></a></li><li class="anchor anchor2"><a href="/web/handbooks/guide/MySql/#mysql架构" class="anchor-link"><div>MySQL架构</div></a></li><li class="anchor anchor2"><a href="/web/handbooks/guide/MySql/#存储引擎" class="anchor-link"><div>存储引擎</div></a><ul class="anchor-list"><li class="anchor anchor3"><a href="/web/handbooks/guide/MySql/#查看存储引擎" class="anchor-link"><div>查看存储引擎</div></a></li><li class="anchor anchor3"><a href="/web/handbooks/guide/MySql/#设置存储引擎" class="anchor-link"><div>设置存储引擎</div></a></li></ul></li></ul></div></aside></div> <div class="theme-default-content content__default"><h1 id="mysql手册"><a href="#mysql手册" class="header-anchor">#</a> MySql手册</h1> <ul><li>数据保存的位置：C:\ProgramData\MySQL\MySQL Server 8.0\Data\</li> <li><a href="https://www.jianshu.com/p/24e1179ef563" target="_blank" rel="noopener noreferrer">MySQL 三万字精华总结<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="常用数据类型"><a href="#常用数据类型" class="header-anchor">#</a> 常用数据类型</h2> <p><a href="https://www.runoob.com/mysql/mysql-data-types.html" target="_blank" rel="noopener noreferrer">常用数据类型<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br>
大致可以分为三类：数值、日期/时间和字符串(字符)类型。</p> <ul><li>数值 —— int，bigint，float，double</li> <li>日期 —— date，time，year，datetime，timestamp</li> <li>字符 —— char，varchar，mediumtext，longtext</li> <li>其他数据类型 —— BINARY、VARBINARY、ENUM、SET、Geometry、Point、MultiPoint、LineString、MultiLineString、Polygon、GeometryCollection等</li></ul> <h3 id="char-和-varchar-的区别"><a href="#char-和-varchar-的区别" class="header-anchor">#</a> CHAR 和 VARCHAR 的区别？</h3> <p>char是固定长度，varchar长度可变：</p> <p>char(n) 和 varchar(n) 中括号中 n 代表字符的个数，并不代表字节个数，比如 CHAR(30) 就可以存储 30 个字符。</p> <p>存储时，前者不管实际存储数据的长度，直接按 char 规定的长度分配存储空间；而后者会根据实际存储的数据分配最终的存储空间</p> <p>相同点：</p> <ol><li>char(n)，varchar(n)中的n都代表字符的个数</li> <li>超过char，varchar最大长度n的限制后，字符串会被截断。</li></ol> <p>不同点：</p> <ol><li>char不论实际存储的字符数都会占用n个字符的空间，而varchar只会占用实际字符应该占用的字节空间加1（实际长度length，0&lt;=length&lt;255）或加2（length&gt;255）。因为varchar保存数据时除了要保存字符串之外还会加一个字节来记录长度（如果列声明长度大于255则使用两个字节来保存长度）。</li> <li>能存储的最大空间限制不一样：char的存储上限为255字节。</li> <li>char在存储时会截断尾部的空格，而varchar不会。</li></ol> <p>char是适合存储很短的、一般固定长度的字符串。例如，char非常适合存储密码的MD5值，因为这是一个定长的值。对于非常短的列，char比varchar在存储空间上也更有效率。</p> <h2 id="索引"><a href="#索引" class="header-anchor">#</a> 索引</h2> <ul><li>索引（Index）是帮助MySQL高效获取数据的数据结构，所以说<strong>索引的本质是：数据结构</strong></li> <li>索引的目的在于提高查询效率，可以类比字典、 火车站的车次表、图书的目录等。</li> <li>可以简单的理解为“排好序的快速查找数据结构”，<strong>特定查找算法</strong>，用 B+树。</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 创建索引：如果是CHAR，VARCHAR类型，length可以小于字段实际长度；如果是BLOB和TEXT类型，必须指定 length。</span>
<span class="token keyword">CREATE</span> <span class="token punctuation">[</span><span class="token keyword">UNIQUE</span><span class="token punctuation">]</span> <span class="token keyword">INDEX</span> indexName <span class="token keyword">ON</span> mytable<span class="token punctuation">(</span>username<span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 修改表结构(添加索引)：</span>
<span class="token keyword">ALTER</span> <span class="token keyword">table</span> tableName <span class="token keyword">ADD</span> <span class="token punctuation">[</span><span class="token keyword">UNIQUE</span><span class="token punctuation">]</span> <span class="token keyword">INDEX</span> indexName<span class="token punctuation">(</span>columnName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 删除：</span>
<span class="token keyword">DROP</span> <span class="token keyword">INDEX</span> <span class="token punctuation">[</span>indexName<span class="token punctuation">]</span> <span class="token keyword">ON</span> mytable<span class="token punctuation">;</span>
<span class="token comment">-- 查看：可以通过添加 \G 来格式化输出信息。</span>
<span class="token keyword">SHOW</span> <span class="token keyword">INDEX</span> <span class="token keyword">FROM</span> table_name\G<span class="token punctuation">;</span>

<span class="token comment">-- 使用ALERT命令：-- 该语句添加一个主键，这意味着索引值必须是唯一的，且不能为NULL。</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> tbl_name <span class="token keyword">ADD</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>column_list<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 这条语句创建索引的值必须是唯一的（除了NULL外，NULL可能会出现多次）。</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> tbl_name <span class="token keyword">ADD</span> <span class="token keyword">UNIQUE</span> index_name <span class="token punctuation">(</span>column_list<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 添加普通索引，索引值可出现多次。</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> tbl_name <span class="token keyword">ADD</span> <span class="token keyword">INDEX</span> index_name <span class="token punctuation">(</span>column_list<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 该语句指定了索引为 FULLTEXT ，用于全文索引。</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> tbl_name <span class="token keyword">ADD</span> FULLTEXT index_name <span class="token punctuation">(</span>column_list<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="优势"><a href="#优势" class="header-anchor">#</a> 优势</h3> <ul><li><strong>提高数据检索效率，降低数据库IO成本</strong></li> <li><strong>降低数据排序的成本，降低CPU的消耗</strong></li></ul> <h3 id="劣势"><a href="#劣势" class="header-anchor">#</a> 劣势</h3> <ul><li>索引也是一张表，保存了主键和索引字段，并指向实体表的记录，所以也需要占用内存</li> <li>虽然索引大大提高了查询速度，同时却会降低更新表的速度，如对表进行INSERT、UPDATE和DELETE。因为更新表时，MySQL不仅要保存数据，还要保存一下索引文件每次更新添加了索引列的字段， 都会调整因为更新所带来的键值变化后的索引信息</li></ul> <h2 id="nodejs-连接-mysql"><a href="#nodejs-连接-mysql" class="header-anchor">#</a> Nodejs 连接 MySql</h2> <ul><li>终端操作</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">show</span> <span class="token keyword">global</span> <span class="token keyword">status</span> <span class="token operator">like</span> <span class="token string">'innodb_page_size'</span><span class="token punctuation">;</span> <span class="token comment">-- 每个索引的大小</span>

<span class="token keyword">create</span> <span class="token keyword">database</span> test<span class="token punctuation">;</span> <span class="token comment">-- 创建数据库</span>
<span class="token comment">-- &gt;Query OK，.....</span>

<span class="token keyword">show</span> <span class="token keyword">databases</span><span class="token punctuation">;</span> <span class="token comment">-- 显示数据库</span>
<span class="token comment">/*
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| test               |
| performance_schema |
| sys                |
+--------------------+
*/</span>

<span class="token keyword">use</span> test<span class="token punctuation">;</span> <span class="token comment">-- 打开一个数据库</span>
<span class="token comment">-- &gt;Database changed</span>

<span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span>
<span class="token comment">/*
+----------------+
| Tables_in_test |
+----------------+
| city           |
| user           |
+----------------+
*/</span>

<span class="token keyword">create</span> <span class="token keyword">table</span> test <span class="token punctuation">(</span> <span class="token comment">-- 创建一个 test 表</span>
    id <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    userName <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- &gt;Query OK，.....</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><h2 id="mysql-的增删改查"><a href="#mysql-的增删改查" class="header-anchor">#</a> MySql 的增删改查</h2> <h3 id="插入数据"><a href="#插入数据" class="header-anchor">#</a> 插入数据</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> xxx <span class="token punctuation">(</span>name<span class="token punctuation">,</span>age<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span>abc<span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 插入数据</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> xxx <span class="token keyword">values</span> <span class="token punctuation">(</span>abc<span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 字段与值相等时</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="删除数据"><a href="#删除数据" class="header-anchor">#</a> 删除数据</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">delete</span> <span class="token keyword">from</span> <span class="token keyword">user</span> <span class="token keyword">where</span> name <span class="token operator">=</span> <span class="token string">'xxx'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="修改"><a href="#修改" class="header-anchor">#</a> 修改</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">update</span> <span class="token keyword">user</span> <span class="token keyword">set</span> name<span class="token operator">=</span><span class="token string">'xxx'</span> <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">'xxx'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="mysql-查询"><a href="#mysql-查询" class="header-anchor">#</a> MySQL 查询</h2> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">let</span> select<span class="token punctuation">;</span> <span class="token comment">// xxx 为表名或库名</span>
select <span class="token operator">=</span> <span class="token string">'drop table xxx'</span><span class="token punctuation">;</span> <span class="token comment">// 删除表</span>
select <span class="token operator">=</span> <span class="token string">'drop database xxx'</span><span class="token punctuation">;</span> <span class="token comment">// 删除库</span>
select <span class="token operator">=</span> <span class="token string">'create database xxx'</span><span class="token punctuation">;</span> <span class="token comment">// 创建库</span>
<span class="token comment">// 创建表</span>
select <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">create table xxx (
	id int not null auto_increment ,
	name varchar(255) null ,
	phone varchar(11) ,
	age int ,
	gender varchar(2) ,
	email varchar(255) ,
	primary key (id)
)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

select <span class="token operator">=</span> <span class="token string">'select * from xxx'</span><span class="token punctuation">;</span> <span class="token comment">// 查询所有数据</span>
select <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">insert into xxx (name,age) values (abc, 21)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span> <span class="token comment">// 插入数据</span>
insert <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">insert into xxx (name,age,phone) values (?,?,?)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span> <span class="token comment">// ? 号用来站位</span>
connection<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>insert<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;小红&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span>，<span class="token string">&quot;13817618902&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> fn<span class="token punctuation">)</span>；<span class="token comment">// 数组里的无数替换 ? 号</span>

connection<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>select<span class="token punctuation">)</span>；
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="count-和-count-1-和-count-列名-区别"><a href="#count-和-count-1-和-count-列名-区别" class="header-anchor">#</a> count(*)  和  count(1) 和 count(列名) 区别</h3> <p>执行效果上：</p> <ul><li>count(*)包括了所有的列，相当于行数，在统计结果的时候，不会忽略列值为NULL</li> <li>count(1)包括了所有列，用1代表代码行，在统计结果的时候，不会忽略列值为NULL</li> <li>count(列名)只包括列名那一列，在统计结果的时候，会忽略列值为空（这里的空不是只空字符串或者0，而是表示null）的计数，即某个字段值为NULL时，不统计。</li></ul> <p>执行效率上：</p> <ul><li>列名为主键，count(列名)会比count(1)快</li> <li>列名不为主键，count(1)会比count(列名)快</li> <li>如果表多个列并且没有主键，则 count(1) 的执行效率优于 count(*)</li> <li>如果有主键，则 select count（主键）的执行效率是最优的</li> <li>如果表只有一个字段，则 select count(*) 最优。</li></ul> <h3 id="mysql中-in-和-exists-的区别"><a href="#mysql中-in-和-exists-的区别" class="header-anchor">#</a> MySQL中  in 和 exists 的区别？</h3> <ul><li>exists：exists对外表用loop逐条查询，每次查询都会查看exists的条件语句，当exists里的条件语句能够返回记录行时（无论记录行是的多少，只要能返回），条件就为真，返回当前loop到的这条记录；反之，如果exists里的条件语句不能返回记录行，则当前loop到的这条记录被丢弃，exists的条件就像一个bool条件，当能返回结果集则为true，不能返回结果集则为false</li> <li>in：in查询相当于多个or条件的叠加</li></ul> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>SELECT <span class="token operator">*</span> FROM A WHERE <span class="token return-type class-name">A<span class="token punctuation">.</span>id</span> IN <span class="token punctuation">(</span>SELECT id <span class="token class-name">FROM</span> B<span class="token punctuation">)</span><span class="token punctuation">;</span>
SELECT <span class="token operator">*</span> FROM A <span class="token return-type class-name">WHERE</span> EXISTS <span class="token punctuation">(</span>SELECT <span class="token operator">*</span> <span class="token keyword">from</span> B WHERE B<span class="token punctuation">.</span>id <span class="token operator">=</span> A<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>如果查询的两个表大小相当，那么用in和exists差别不大</strong>。<br>
如果两个表中一个较小，一个是大表，则子查询表大的用exists，子查询表小的用in：</p> <h3 id="union-和-union-all-的区别"><a href="#union-和-union-all-的区别" class="header-anchor">#</a> UNION 和 UNION ALL 的区别?</h3> <p>UNION和UNION ALL都是将两个结果集合并为一个，<strong>两个要联合的SQL语句 字段个数必须一样，而且字段类型要“相容”（一致）；</strong></p> <ul><li>UNION在进行表连接后会筛选掉重复的数据记录（效率较低），而UNION ALL则不会去掉重复的数据记录；</li> <li>UNION会按照字段的顺序进行排序，而UNION ALL只是简单的将两个结果合并就返回；</li></ul> <h3 id="sql执行顺序"><a href="#sql执行顺序" class="header-anchor">#</a> SQL执行顺序</h3> <ul><li>手写</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span> <span class="token operator">&lt;</span> select_list <span class="token operator">&gt;</span> 
<span class="token keyword">FROM</span>
	<span class="token operator">&lt;</span> left_table <span class="token operator">&gt;</span> <span class="token operator">&lt;</span> join_type <span class="token operator">&gt;</span>
	<span class="token keyword">JOIN</span> <span class="token operator">&lt;</span> right_table <span class="token operator">&gt;</span> <span class="token keyword">ON</span> <span class="token operator">&lt;</span> join_condition <span class="token operator">&gt;</span> 
<span class="token keyword">WHERE</span> <span class="token operator">&lt;</span> where_condition <span class="token operator">&gt;</span> 
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token operator">&lt;</span> group_by_list <span class="token operator">&gt;</span> 
<span class="token keyword">HAVING</span> <span class="token operator">&lt;</span> having_condition <span class="token operator">&gt;</span> 
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	<span class="token operator">&lt;</span> order_by_condition <span class="token operator">&gt;</span> 
	<span class="token keyword">LIMIT</span> <span class="token operator">&lt;</span> limit_number<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li>机读</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">FROM</span>
	<span class="token operator">&lt;</span> left_table <span class="token operator">&gt;</span> <span class="token keyword">ON</span> <span class="token operator">&lt;</span> join_condition <span class="token operator">&gt;</span> <span class="token operator">&lt;</span> join_type <span class="token operator">&gt;</span>
	<span class="token keyword">JOIN</span> <span class="token operator">&lt;</span> right_table <span class="token operator">&gt;</span> 
<span class="token keyword">WHERE</span> <span class="token operator">&lt;</span> where_condition <span class="token operator">&gt;</span> 
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> <span class="token operator">&lt;</span> group_by_list <span class="token operator">&gt;</span> 
<span class="token keyword">HAVING</span>
	<span class="token operator">&lt;</span> having_condition <span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token keyword">DISTINCT</span>
	<span class="token operator">&lt;</span> select_list <span class="token operator">&gt;</span> 
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span>
	<span class="token operator">&lt;</span> order_by_condition <span class="token operator">&gt;</span> 
	<span class="token keyword">LIMIT</span> <span class="token operator">&lt;</span> limit_number<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li>总结
<img src="https://kasumi64.gitee.io/web/image-host/manual/SQL%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F.webp" alt="SQL执行顺序"></li></ul> <h2 id="性能优化"><a href="#性能优化" class="header-anchor">#</a> 性能优化</h2> <h3 id="索引优化"><a href="#索引优化" class="header-anchor">#</a> 索引优化</h3> <ul><li>全值匹配我最爱</li> <li>最佳左前缀法则，比如建立了一个联合索引(a,b,c)，那么其实我们可利用的索引就有(a), (a,b), (a,b,c)</li> <li>不在索引列上做任何操作（计算、函数、(自动or手动)类型转换），会导致索引失效而转向全表扫描</li> <li>存储引擎不能使用索引中范围条件右边的列</li> <li>尽量使用覆盖索引(只访问索引的查询(索引列和查询列一致))，减少select</li> <li>is null ,is not null 也无法使用索引</li> <li>like &quot;xxxx%&quot; 是可以用到索引的，like &quot;%xxxx&quot; 则不行(like &quot;%xxx%&quot; 同理)。like以通配符开头('%abc...')索引失效会变成全表扫描的操作，</li> <li>字符串不加单引号索引失效</li> <li>少用or，用它来连接时会索引失效</li> <li>&lt;，&lt;=，=，&gt;，&gt;=，BETWEEN，IN 可用到索引，&lt;&gt;，not in ，!= 则不行，会导致全表扫描</li></ul> <h3 id="一般性建议"><a href="#一般性建议" class="header-anchor">#</a> 一般性建议</h3> <ul><li>对于单键索引，尽量选择针对当前query过滤性更好的索引。</li> <li>在选择组合索引的时候，当前Query中过滤性最好的字段在索引字段顺序中，位置越靠前越好。</li> <li>在选择组合索引的时候，尽量选择可以能够包含当前query中的where字句中更多字段的索引。</li> <li>尽可能通过分析统计信息和调整query的写法来达到选择合适索引的目的。</li> <li>少用Hint强制索引。</li></ul> <h3 id="查询优化"><a href="#查询优化" class="header-anchor">#</a> 查询优化</h3> <p><strong>永远小标驱动大表（小的数据集驱动大的数据集）。</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>slect <span class="token operator">*</span> <span class="token keyword">from</span> A <span class="token keyword">where</span> id <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> id <span class="token keyword">from</span> B<span class="token punctuation">)</span><span class="token punctuation">`</span>等价于
<span class="token comment">#等价于</span>
<span class="token keyword">select</span> id <span class="token keyword">from</span> B
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> A <span class="token keyword">where</span> A<span class="token punctuation">.</span>id<span class="token operator">=</span>B<span class="token punctuation">.</span>id
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>当 B 表的数据集必须小于 A 表的数据集时，用 in 优于 exists。</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> A <span class="token keyword">where</span> <span class="token keyword">exists</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token number">1</span> <span class="token keyword">from</span> B <span class="token keyword">where</span> B<span class="token punctuation">.</span>id<span class="token operator">=</span>A<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
<span class="token comment">#等价于</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> A
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> B <span class="token keyword">where</span> B<span class="token punctuation">.</span>id <span class="token operator">=</span> A<span class="token punctuation">.</span>id<span class="token punctuation">`</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>当 A 表的数据集小于B表的数据集时，用 exists优于用 in<br>
注意：A表与B表的ID字段应建立索引。</p> <h3 id="order-by关键字优化"><a href="#order-by关键字优化" class="header-anchor">#</a> ORDER BY关键字优化</h3> <ul><li>order by子句，尽量使用 Index 方式排序，避免使用 FileSort 方式排序</li> <li>MySQL 支持两种方式的排序，FileSort 和 Index，Index效率高，它指 MySQL 扫描索引本身完成排序，FileSort 效率较低；</li> <li>ORDER BY 满足两种情况，会使用Index方式排序；①ORDER BY语句使用索引最左前列 ②使用where子句与ORDER BY子句条件列组合满足索引最左前列</li> <li>尽可能在索引列上完成排序操作，遵照索引建的最佳最前缀</li> <li>如果不在索引列上，filesort 有两种算法，mysql就要启动双路排序和单路排序</li> <li>双路排序：MySQL 4.1之前是使用双路排序,字面意思就是两次扫描磁盘，最终得到数据</li> <li>单路排序：从磁盘读取查询需要的所有列，按照order by 列在 buffer对它们进行排序，然后扫描排序后的列表进行输出，效率高于双路排序</li> <li>优化策略</li> <li>增大sort_buffer_size参数的设置</li> <li>增大max_lencth_for_sort_data参数的设置</li></ul> <h3 id="group-by关键字优化"><a href="#group-by关键字优化" class="header-anchor">#</a> GROUP BY关键字优化</h3> <ul><li>group by实质是先排序后进行分组，遵照索引建的最佳左前缀</li> <li>当无法使用索引列，增大 max_length_for_sort_data 参数的设置，增大sort_buffer_size参数的设置</li> <li>where高于having，能写在where限定的条件就不要去having限定了</li></ul> <h3 id="数据类型优化"><a href="#数据类型优化" class="header-anchor">#</a> 数据类型优化</h3> <ul><li>MySQL 支持的数据类型非常多，选择正确的数据类型对于获取高性能至关重要。不管存储哪种类型的数据，下面几个简单的原则都有助于做出更好的选择。</li> <li>更小的通常更好：一般情况下，应该尽量使用可以正确存储数据的最小数据类型。</li> <li>简单就好：简单的数据类型通常需要更少的CPU周期。例如，整数比字符操作代价更低，因为字符集和校对规则（排序规则）使字符比较比整型比较复杂。</li> <li>尽量避免NULL：通常情况下最好指定列为NOT NULL</li></ul> <h3 id="条件查询"><a href="#条件查询" class="header-anchor">#</a> 条件查询</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> xxx<span class="token punctuation">;</span> <span class="token comment">-- 查询所有数据</span>

<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">user</span> <span class="token keyword">where</span> age <span class="token operator">&gt;</span> <span class="token number">25</span><span class="token punctuation">;</span> <span class="token comment">-- age 大干25</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">user</span> <span class="token keyword">where</span> age <span class="token operator">&gt;</span> <span class="token number">25</span> <span class="token operator">and</span> age <span class="token operator">&lt;</span> <span class="token number">40</span><span class="token punctuation">;</span> <span class="token comment">-- age 大干25 且 小于 40</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">user</span> <span class="token keyword">where</span> age <span class="token operator">between</span> <span class="token number">25</span> <span class="token operator">and</span> <span class="token number">40</span><span class="token punctuation">;</span> <span class="token comment">-- age 大干25 且 小于 40</span>

<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">user</span> <span class="token keyword">where</span> name <span class="token operator">=</span> <span class="token string">'乐一鸣'</span><span class="token punctuation">;</span> <span class="token comment">-- name 为“乐一鸣”的</span>
<span class="token keyword">select</span> name <span class="token keyword">from</span> <span class="token keyword">user</span> <span class="token keyword">where</span> gender <span class="token operator">!=</span> <span class="token string">'男'</span><span class="token punctuation">;</span> <span class="token comment">-- gender 不等于&quot;男&quot;</span>

<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">user</span> <span class="token keyword">where</span> age <span class="token operator">=</span> <span class="token number">19</span> <span class="token operator">or</span> age <span class="token operator">=</span> <span class="token number">25</span><span class="token punctuation">;</span> <span class="token comment">-- or 或</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">user</span> <span class="token keyword">where</span> age <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- or 或</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="模糊查询"><a href="#模糊查询" class="header-anchor">#</a> 模糊查询</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">user</span> <span class="token keyword">where</span> name <span class="token operator">like</span> <span class="token string">'%惠%'</span><span class="token punctuation">;</span> <span class="token comment">// %任意多个字符, 查找含有 &quot;惠&quot; 全部</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">user</span> <span class="token keyword">where</span> name <span class="token operator">like</span> <span class="token string">'乐__'</span><span class="token punctuation">;</span> <span class="token comment">// _任意一个字符, 查找含有 &quot;乐xx&quot;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">user</span> <span class="token keyword">where</span> email <span class="token operator">is</span> <span class="token boolean">null</span><span class="token punctuation">;</span> <span class="token comment">// 为 null</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">user</span> <span class="token keyword">where</span> email <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span> <span class="token comment">// 不为 null</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> s_name <span class="token operator">not</span> <span class="token operator">like</span> <span class="token string">'王%'</span><span class="token punctuation">;</span> <span class="token comment">// 不性王的</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="不重复"><a href="#不重复" class="header-anchor">#</a> 不重复</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token keyword">distinct</span> userName <span class="token keyword">from</span> <span class="token keyword">user</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="排序"><a href="#排序" class="header-anchor">#</a> 排序</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">user</span> <span class="token keyword">order</span> <span class="token keyword">by</span> id <span class="token keyword">asc</span><span class="token punctuation">;</span> <span class="token comment">-- 升序</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">user</span> <span class="token keyword">order</span> <span class="token keyword">by</span> id <span class="token keyword">desc</span><span class="token punctuation">;</span> <span class="token comment">-- 降序</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token keyword">user</span> <span class="token keyword">order</span> <span class="token keyword">by</span> id <span class="token keyword">desc</span><span class="token punctuation">,</span> phone <span class="token keyword">asc</span><span class="token punctuation">;</span> <span class="token comment">-- id 升序, phone 降序</span>

<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> <span class="token keyword">user</span> <span class="token keyword">where</span> id <span class="token operator">&gt;</span> <span class="token number">200</span><span class="token punctuation">;</span> <span class="token comment">-- 统计</span>
<span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token keyword">from</span> <span class="token keyword">user</span><span class="token punctuation">;</span> <span class="token comment">-- 最大</span>
<span class="token keyword">select</span> <span class="token function">min</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token keyword">from</span> <span class="token keyword">user</span><span class="token punctuation">;</span> <span class="token comment">-- 最小</span>

<span class="token comment">-- 最大或最小的一条数据, limit 第一个数字是从哪里开始，第二个数字是要多少条</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> city <span class="token keyword">order</span> <span class="token keyword">by</span> city_id <span class="token keyword">desc</span> <span class="token keyword">limit</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token comment">-- 多字段排序</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">order</span> <span class="token keyword">by</span> s_class <span class="token keyword">desc</span><span class="token punctuation">,</span> s_birthday <span class="token keyword">asc</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="多表查询"><a href="#多表查询" class="header-anchor">#</a> 多表查询</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student<span class="token punctuation">,</span>score <span class="token keyword">where</span> student<span class="token punctuation">.</span>id <span class="token operator">=</span> score<span class="token punctuation">.</span>sid<span class="token punctuation">;</span>
<span class="token comment">-- sname -&gt; student, cname -&gt; course, degree -&gt; score;</span>
<span class="token keyword">select</span> sname<span class="token punctuation">,</span>cname<span class="token punctuation">,</span>degree <span class="token keyword">from</span> student<span class="token punctuation">,</span>course<span class="token punctuation">,</span>score
<span class="token keyword">where</span> student<span class="token punctuation">.</span>id <span class="token operator">=</span> score<span class="token punctuation">.</span>sid <span class="token operator">and</span> course<span class="token punctuation">.</span>cno <span class="token operator">=</span> score<span class="token punctuation">.</span>sid<span class="token punctuation">;</span>

<span class="token comment">-- 查询成绩高于“109”号同学，课程为&quot;3-105&quot;的所有记录。</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> score <span class="token keyword">where</span> degree <span class="token operator">&gt;</span>
<span class="token punctuation">(</span><span class="token keyword">select</span> degree <span class="token keyword">from</span> score <span class="token keyword">where</span> s_no<span class="token operator">=</span><span class="token string">'109'</span> <span class="token operator">and</span> c_no<span class="token operator">=</span><span class="token string">'3-105'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询&quot;3-105&quot;课程成绩高于“109”号同学，成绩的所有记录。</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> score <span class="token keyword">where</span> c_no<span class="token operator">=</span><span class="token string">'3-105'</span><span class="token operator">and</span> degree <span class="token operator">&gt;</span>
<span class="token punctuation">(</span><span class="token keyword">select</span> degree <span class="token keyword">from</span> score <span class="token keyword">where</span> s_no<span class="token operator">=</span><span class="token string">'109'</span> <span class="token operator">and</span> c_no<span class="token operator">=</span><span class="token string">'3-105'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 与“108”、“101”同年出生的人</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> <span class="token keyword">year</span><span class="token punctuation">(</span>s_birthday<span class="token punctuation">)</span> <span class="token operator">in</span>
<span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token keyword">year</span><span class="token punctuation">(</span>s_birthday<span class="token punctuation">)</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> s_no <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">108</span><span class="token punctuation">,</span><span class="token number">101</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- &quot;张旭&quot;教师的学生成绩。</span>
<span class="token comment">-- select t_no from teacher where t_name = '张旭';</span>
<span class="token comment">-- select c_no from course where t_no=(select t_no from teacher where t_name = '张旭');</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> score <span class="token keyword">where</span> c_no<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">select</span> c_no <span class="token keyword">from</span> course <span class="token keyword">where</span> t_no<span class="token operator">=</span><span class="token punctuation">(</span><span class="token keyword">select</span> t_no <span class="token keyword">from</span> teacher <span class="token keyword">where</span> t_name <span class="token operator">=</span> <span class="token string">'张旭'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 所有同学的分数等级</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> score<span class="token punctuation">,</span> grade <span class="token keyword">where</span> degree <span class="token operator">between</span> low <span class="token operator">and</span> upp<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="union-any-all"><a href="#union-any-all" class="header-anchor">#</a> union, any, all</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- union 求并，把两条语句的结果并在一起。</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> teacher <span class="token keyword">where</span> t_depart<span class="token operator">=</span><span class="token string">'计算机系'</span> <span class="token operator">and</span> t_prof <span class="token operator">not</span> <span class="token operator">in</span><span class="token punctuation">(</span><span class="token keyword">select</span> t_prof <span class="token keyword">from</span> teacher <span class="token keyword">where</span> t_depart<span class="token operator">=</span><span class="token string">'电子工程系'</span><span class="token punctuation">)</span>
<span class="token keyword">UNION</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> teacher <span class="token keyword">where</span> t_depart<span class="token operator">=</span><span class="token string">'电子工程系'</span> <span class="token operator">and</span> t_prof <span class="token operator">not</span> <span class="token operator">in</span><span class="token punctuation">(</span><span class="token keyword">select</span> t_prof <span class="token keyword">from</span> teacher <span class="token keyword">where</span> t_depart<span class="token operator">=</span><span class="token string">'计算机系'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- any 至少大于一个</span>
<span class="token comment">-- '3-105'课程成绩至少高于'3-245'课程的同学，并按degree从高到低排序。</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> score <span class="token keyword">where</span> c_no<span class="token operator">=</span><span class="token string">'3-105'</span> <span class="token operator">and</span> degree<span class="token operator">&gt;</span><span class="token keyword">any</span>
<span class="token punctuation">(</span><span class="token keyword">select</span> degree <span class="token keyword">from</span> score <span class="token keyword">where</span> c_no<span class="token operator">=</span><span class="token string">'6-166'</span><span class="token punctuation">)</span>
<span class="token keyword">order</span> <span class="token keyword">by</span> degree <span class="token keyword">desc</span><span class="token punctuation">;</span>

<span class="token comment">-- all 所有</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> score <span class="token keyword">where</span> c_no<span class="token operator">=</span><span class="token string">'3-105'</span> <span class="token operator">and</span> degree<span class="token operator">&gt;</span><span class="token keyword">all</span>
<span class="token punctuation">(</span><span class="token keyword">select</span> degree <span class="token keyword">from</span> score <span class="token keyword">where</span> c_no<span class="token operator">=</span><span class="token string">'3-245'</span><span class="token punctuation">)</span>
<span class="token keyword">order</span> <span class="token keyword">by</span> degree <span class="token keyword">desc</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="复制条件查询"><a href="#复制条件查询" class="header-anchor">#</a> 复制条件查询</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> score a <span class="token keyword">where</span> degree <span class="token operator">&lt;</span>
<span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>degree<span class="token punctuation">)</span> <span class="token keyword">from</span> score b <span class="token keyword">where</span> a<span class="token punctuation">.</span>c_no<span class="token operator">=</span>b<span class="token punctuation">.</span>c_no<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="分页"><a href="#分页" class="header-anchor">#</a> 分页</h2> <p><a href="https://blog.csdn.net/bandaoyu/article/details/89844673" target="_blank" rel="noopener noreferrer">mysql 分页查询<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li>limit分页公式：curPage是当前第几页；pageSize是一页多少条记录</li> <li>总页数公式：totalRecord是总记录数；pageSize是一页分多少条记录</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">limit</span><span class="token punctuation">(</span>curPage<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span>pageSize<span class="token punctuation">,</span>pageSize<span class="token punctuation">;</span>
<span class="token keyword">int</span> totalPageNum <span class="token operator">=</span> <span class="token punctuation">(</span>totalRecord <span class="token operator">+</span>pageSize <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">/</span> pageSize<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> dept <span class="token keyword">order</span> <span class="token keyword">by</span> deptno <span class="token keyword">desc</span> <span class="token keyword">limit</span> <span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> dept <span class="token keyword">order</span> <span class="token keyword">by</span> deptno <span class="token keyword">desc</span> <span class="token keyword">limit</span> m<span class="token punctuation">,</span>n<span class="token punctuation">;</span>


<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> orders_history <span class="token keyword">where</span> <span class="token keyword">type</span><span class="token operator">=</span><span class="token number">8</span> <span class="token keyword">limit</span> <span class="token number">100</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> orders_history <span class="token keyword">where</span> <span class="token keyword">type</span><span class="token operator">=</span><span class="token number">8</span> <span class="token keyword">limit</span> <span class="token number">1000</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> orders_history <span class="token keyword">where</span> <span class="token keyword">type</span><span class="token operator">=</span><span class="token number">8</span> <span class="token keyword">limit</span> <span class="token number">10000</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> orders_history <span class="token keyword">where</span> <span class="token keyword">type</span><span class="token operator">=</span><span class="token number">8</span> <span class="token keyword">limit</span> <span class="token number">100000</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> orders_history <span class="token keyword">where</span> <span class="token keyword">type</span><span class="token operator">=</span><span class="token number">8</span> <span class="token keyword">limit</span> <span class="token number">1000000</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> dept <span class="token keyword">where</span> deptno <span class="token operator">&gt;</span><span class="token number">10</span> <span class="token keyword">order</span> <span class="token keyword">by</span> deptno <span class="token keyword">asc</span> <span class="token keyword">limit</span> n<span class="token punctuation">;</span><span class="token comment">//下一页</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> dept <span class="token keyword">where</span> deptno <span class="token operator">&lt;</span><span class="token number">60</span> <span class="token keyword">order</span> <span class="token keyword">by</span> deptno <span class="token keyword">desc</span> <span class="token keyword">limit</span> n<span class="token comment">//上一</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="函数"><a href="#函数" class="header-anchor">#</a> 函数</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span> <span class="token keyword">from</span> <span class="token keyword">user</span> <span class="token keyword">where</span> gender <span class="token operator">=</span> <span class="token string">'女'</span><span class="token punctuation">;</span> <span class="token comment">-- avg 平均数</span>
<span class="token keyword">select</span> name<span class="token punctuation">,</span> <span class="token function">avg</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span> <span class="token keyword">from</span> <span class="token keyword">user</span> <span class="token keyword">group</span> <span class="token keyword">by</span> gender<span class="token punctuation">;</span> <span class="token comment">-- group by 分组</span>
<span class="token keyword">select</span> name<span class="token punctuation">,</span> <span class="token function">avg</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span> <span class="token keyword">from</span> <span class="token keyword">user</span> <span class="token keyword">where</span> id <span class="token operator">in</span>
<span class="token punctuation">(</span><span class="token keyword">select</span> id <span class="token keyword">from</span> <span class="token keyword">user</span> <span class="token keyword">where</span> gender <span class="token operator">=</span> <span class="token string">'女'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- having 可以使用一个HAVING子句必须位于GROUP BY子句之后，并位于ORDER BY子句之前</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> s_sex<span class="token operator">=</span><span class="token string">'男'</span> <span class="token keyword">group</span> <span class="token keyword">by</span> s_class <span class="token keyword">having</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">2</span><span class="token punctuation">;</span>

<span class="token comment">-- year, now()</span>
<span class="token keyword">select</span> <span class="token operator">*</span><span class="token punctuation">,</span> <span class="token keyword">year</span><span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token keyword">year</span><span class="token punctuation">(</span>s_birthday<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">'年龄'</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>

<span class="token comment">-- max, min</span>
<span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>s_birthday<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">'年龄最小'</span><span class="token punctuation">,</span> <span class="token function">min</span><span class="token punctuation">(</span>s_birthday<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">'年龄最大'</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="外键"><a href="#外键" class="header-anchor">#</a> 外键</h2> <ol><li><p>关联表的时候，防止关联无效的数据</p> <ul><li>restrict(限制)：默认值，抛异常</li> <li>cascade(级联)：如果主表的记录被删除，则从表中的相关记录也被删除</li> <li>set null：将外外键设置为空</li> <li>no action：什么都不做</li></ul></li> <li><p>一对多用两张表，多对多用三张表</p></li></ol> <h2 id="连表查询"><a href="#连表查询" class="header-anchor">#</a> 连表查询</h2> <ol><li><p>连接分类：</p> <ul><li>表A inner join 或 join 表B：表A和表B匹配的行会出现在结果中</li> <li>表A left join 表B：表A与表B匹配的行会出现在结果中，外加表A中独有的数据，未对应的数据用null。</li> <li>表A right join 表B：表A与表B匹配的行会出现在结果中，外加表B中独有的数据，未对应的数据用null。</li> <li>完全外链接 full join 或 full outer join</li></ul></li> <li><p>代码</p></li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 连表inner join，on 要查的字段(条件)，查出多表中共有的</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> author <span class="token keyword">inner</span> <span class="token keyword">join</span> books <span class="token keyword">on</span> author<span class="token punctuation">.</span>id <span class="token operator">=</span> books<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> author <span class="token keyword">left</span> <span class="token keyword">join</span> books <span class="token keyword">on</span> author<span class="token punctuation">.</span>id <span class="token operator">=</span> books<span class="token punctuation">.</span>id <span class="token keyword">where</span> author<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'李%'</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> author <span class="token keyword">as</span> au <span class="token keyword">right</span> <span class="token keyword">join</span> books <span class="token keyword">as</span> bo <span class="token keyword">on</span> au<span class="token punctuation">.</span>id <span class="token operator">=</span> bo<span class="token punctuation">.</span>id<span class="token punctuation">;</span>
<span class="token comment">-- 多表，author作者，books书，publish出版社</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> author <span class="token keyword">inner</span> <span class="token keyword">join</span> publish <span class="token keyword">on</span> author<span class="token punctuation">.</span>id <span class="token operator">=</span> books<span class="token punctuation">.</span>id
<span class="token keyword">inner</span> <span class="token keyword">join</span> books <span class="token keyword">where</span> author<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'李白'</span><span class="token punctuation">;</span>

<span class="token comment">-- 多表，返某个字段</span>
<span class="token keyword">select</span> author<span class="token punctuation">.</span>tip<span class="token punctuation">,</span> books<span class="token punctuation">.</span>name<span class="token punctuation">,</span> publish<span class="token punctuation">.</span>tip <span class="token keyword">from</span> author
<span class="token keyword">inner</span> <span class="token keyword">join</span> publish <span class="token keyword">on</span> author<span class="token punctuation">.</span>id <span class="token operator">=</span> books<span class="token punctuation">.</span>id
<span class="token keyword">inner</span> <span class="token keyword">join</span> books <span class="token keyword">where</span> author<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'李白'</span><span class="token punctuation">;</span>

<span class="token comment">-- 自关联查询, city_id 省市id, city_name 省市名称, parent_id, 上级id(一般为省)</span>
<span class="token comment">-- 找广东省的所有市</span>
<span class="token keyword">SELECT</span> c2<span class="token punctuation">.</span>city_id<span class="token punctuation">,</span> c1<span class="token punctuation">.</span>city_name <span class="token keyword">as</span> <span class="token string">'省份'</span><span class="token punctuation">,</span> c2<span class="token punctuation">.</span>city_name <span class="token keyword">as</span> <span class="token string">'城市'</span>
<span class="token keyword">FROM</span> city <span class="token keyword">as</span> c1 <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> city <span class="token keyword">as</span> c2
<span class="token keyword">on</span> c1<span class="token punctuation">.</span>city_id <span class="token operator">=</span> c2<span class="token punctuation">.</span>parent_id
<span class="token keyword">WHERE</span> c1<span class="token punctuation">.</span>city_name <span class="token operator">=</span> <span class="token string">'广东省'</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="子查询"><a href="#子查询" class="header-anchor">#</a> 子查询</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 子查询用 where 后用 in() 或 =(), （）里返回只能是一个字段；</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> city <span class="token keyword">WHERE</span> parent_id <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> city_id <span class="token keyword">FROM</span> city <span class="token keyword">WHERE</span> city_id <span class="token operator">=</span> <span class="token number">61</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- exists 存在某个条件下，才可以做下个查询</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> city <span class="token keyword">WHERE</span> <span class="token keyword">EXISTS</span>  <span class="token punctuation">(</span><span class="token keyword">SELECT</span> city_id <span class="token keyword">FROM</span> city <span class="token keyword">WHERE</span> city_id <span class="token operator">=</span> <span class="token number">44</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 最大或最小的一条数据</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> city <span class="token keyword">WHERE</span>  <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>city_id<span class="token punctuation">)</span> <span class="token keyword">from</span> city<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">温馨提示：</p> <ul><li>在查询或条件中推荐使用 “表名.列名” 的语法</li> <li>如果多个表中列名不重复可以省略 “表名.” 部分</li> <li>如果表名太长，可以表名后面使用 ”as“ 或  ”简写名“，为表起个临时的名称</li></ul></div> <h2 id="建表字段约束"><a href="#建表字段约束" class="header-anchor">#</a> 建表字段约束</h2> <ul><li><p>主键约束 —— 它能够唯一确定一张表中的条记录，也就是给某个字段添加约束，使得该字段不重复，且不为空。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- primary key 字段重复</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">user</span> <span class="token punctuation">(</span>id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span> name <span class="token keyword">char</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 联合主键, 两个字段在一起不重复就可以</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">user</span> <span class="token punctuation">(</span>id <span class="token keyword">int</span><span class="token punctuation">,</span> name <span class="token keyword">char</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>自增约束 ——</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- primary key auto_increment</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">user</span> <span class="token punctuation">(</span>id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span> name <span class="token keyword">char</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul> <div class="custom-block warning"><p class="custom-block-title">注意</p> <p>如果说我们建表时，忘记创建主键约束了，可以这样添加．．．</p></div> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 添加主键约束 add</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> xxx <span class="token keyword">add</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 删除主键约束 drop</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> xxx <span class="token keyword">drop</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 修改主键约束 modify</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> xxx <span class="token keyword">modify</span> id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li><p>唯一约束 —— 字段的值不可以重复</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 创建表</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">user</span> <span class="token punctuation">(</span>id <span class="token keyword">int</span><span class="token punctuation">,</span> name <span class="token keyword">char</span> <span class="token keyword">unique</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">user</span> <span class="token punctuation">(</span>id <span class="token keyword">int</span><span class="token punctuation">,</span> name <span class="token keyword">char</span><span class="token punctuation">,</span> <span class="token keyword">unique</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> xxx <span class="token keyword">add</span> <span class="token keyword">unique</span> <span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 添加</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> xxx <span class="token keyword">drop</span> <span class="token keyword">index</span> name<span class="token punctuation">;</span> <span class="token comment">-- 删除</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> xxx <span class="token keyword">modify</span> name <span class="token keyword">char</span> <span class="token keyword">unique</span><span class="token punctuation">;</span> <span class="token comment">-- 修改</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p>非空约束 —— 字段不能为 Null</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 创建表</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">user</span> <span class="token punctuation">(</span>id <span class="token keyword">int</span><span class="token punctuation">,</span> name <span class="token keyword">char</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">user</span> <span class="token punctuation">(</span>id <span class="token keyword">int</span><span class="token punctuation">,</span> name <span class="token keyword">char</span><span class="token punctuation">,</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> xxx <span class="token keyword">add</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 添加</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> xxx <span class="token keyword">modify</span> name <span class="token keyword">char</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span> <span class="token comment">-- 修改</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>默认约束 —— 插入字段时，没有传值，就会用默认值</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 创建表</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">user</span> <span class="token punctuation">(</span>id <span class="token keyword">int</span><span class="token punctuation">,</span> name <span class="token keyword">char</span> <span class="token keyword">default</span> <span class="token string">'AA'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> xxx <span class="token keyword">add</span> <span class="token keyword">default</span> <span class="token string">'BB'</span> <span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 添加</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> xxx <span class="token keyword">modify</span> name <span class="token keyword">char</span> <span class="token keyword">default</span> <span class="token string">'CC'</span><span class="token punctuation">;</span> <span class="token comment">-- 修改</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li> <li><p>外键约束 —— 涉级两上以上的表，主表、副表</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 创建表1</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token keyword">user</span> <span class="token punctuation">(</span>myid <span class="token keyword">int</span><span class="token punctuation">,</span> name <span class="token keyword">char</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 创建表2</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> books <span class="token punctuation">(</span>
    id <span class="token keyword">int</span><span class="token punctuation">,</span> name <span class="token keyword">varchar</span><span class="token punctuation">,</span> user_id <span class="token keyword">int</span><span class="token punctuation">,</span>
    <span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>user_id<span class="token punctuation">)</span> <span class="token keyword">references</span> <span class="token keyword">user</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token comment">-- 自己的某个字段(user_id)，必须来自哪个表(user)的字段(myid)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ul> <h2 id="数据库的三大设计范式"><a href="#数据库的三大设计范式" class="header-anchor">#</a> 数据库的三大设计范式</h2> <ol><li>数据表中的所有字段都是不可分割的原子值。</li> <li>必须是满足第一范式的前提下，第二范式要求，除主键外的每一列都必须完全依赖与主键。如果要出现不完依赖，只可能发生在联合主键的情况下。</li> <li>必须是满足第二范式的前提下，除开主键列的其它列之间不能有传递依赖关系。</li></ol> <h2 id="事务"><a href="#事务" class="header-anchor">#</a> 事务</h2> <ul><li>mysql中，事务其实是一个最小的不可分割的工作单元。事务能够保证一个业务的完事性。</li> <li>-- 实际中可能只有一条语句执行成功，另一条失败，出现数据前后不一致。
-- 多条sql语句，可能会有同时成功的要求。</li> <li>事务是给我们一个返回的机会</li></ul> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 比如银行转账：</span>
<span class="token keyword">update</span> <span class="token keyword">user</span> <span class="token keyword">set</span> money<span class="token operator">=</span>money<span class="token operator">-</span><span class="token number">100</span> <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">'a'</span><span class="token punctuation">;</span> <span class="token comment">-- a -&gt; -100</span>
<span class="token keyword">update</span> <span class="token keyword">user</span> <span class="token keyword">set</span> money<span class="token operator">=</span>money<span class="token operator">+</span><span class="token number">100</span> <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">'b'</span><span class="token punctuation">;</span> <span class="token comment">-- b -&gt; +100</span>

<span class="token comment">-- 事务默认是开启的</span>
<span class="token keyword">select</span> @<span class="token variable">@autocommit</span><span class="token punctuation">;</span>
<span class="token keyword">set</span> autocommit <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">-- 关闭事务</span>
<span class="token keyword">rollback</span><span class="token punctuation">;</span> <span class="token comment">-- 回滚, autocommit=1 时不可回滚</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> <span class="token keyword">user</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- 关闭事务后, 数据是在临时表里</span>
<span class="token keyword">commit</span><span class="token punctuation">;</span> <span class="token comment">-- 手动提交后，就不可回滚了</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="begin-或者-start-transaction-可以帮我们开启一个事务"><a href="#begin-或者-start-transaction-可以帮我们开启一个事务" class="header-anchor">#</a> begin; 或者 start transaction; 可以帮我们开启一个事务；</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">begin</span><span class="token punctuation">;</span>
<span class="token keyword">update</span> <span class="token keyword">user</span> <span class="token keyword">set</span> money<span class="token operator">=</span>money<span class="token operator">-</span><span class="token number">100</span> <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">'a'</span><span class="token punctuation">;</span> <span class="token comment">-- a -&gt; -100</span>
<span class="token keyword">update</span> <span class="token keyword">user</span> <span class="token keyword">set</span> money<span class="token operator">=</span>money<span class="token operator">+</span><span class="token number">100</span> <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">'b'</span><span class="token punctuation">;</span> <span class="token comment">-- b -&gt; +100</span>
<span class="token keyword">rollback</span><span class="token punctuation">;</span> <span class="token comment">-- 回退</span>
<span class="token keyword">commit</span><span class="token punctuation">;</span> <span class="token comment">-- 手动提交后，就不可回滚了</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="事务的四大特征"><a href="#事务的四大特征" class="header-anchor">#</a> 事务的四大特征：</h3> <ol><li>原子性：事务是最小的单位，不可以在分割。</li> <li>一致性：事务要求，同一事务中的 sql 语句，必须保证同时成功或都同时失败。</li> <li>隔离性：事务1 和事务2 之间是具有隔离性的。</li> <li>持久性：事务一旦结束 (commint)，就不可以回退 (rollback)。</li></ol> <h4 id="事务隔离性"><a href="#事务隔离性" class="header-anchor">#</a> 事务隔离性：</h4> <ol><li>read uncommitted;   读未提交的
<ul><li>事务 A 对数据进行操作，在操作的过程中，事务没有提交，但是 B 可以看见 A 操作的结果。</li> <li>如果两个不同的地方，都在进行操作，如果事务 A 开启后，他的数据可以被其他事务读取到。<br>
这样就会出现了（脏读）</li> <li>脏读：一个事务讲到了另外一个事务没有提交的数据，就叫做脏读。</li> <li>开发中是不允许脏读出现的。</li></ul></li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- mysql 8.x</span>
<span class="token keyword">select</span> @<span class="token variable">@global.transaction_isolation</span><span class="token punctuation">;</span> <span class="token comment">-- 系统级别的</span>
<span class="token keyword">select</span> transaction_isolation<span class="token punctuation">;</span>  <span class="token comment">-- 会话级别的</span>
<span class="token comment">-- mysql 5.x</span>
<span class="token keyword">select</span> @<span class="token variable">@global.tx_isolation</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> @<span class="token variable">@tx_isolation</span><span class="token punctuation">;</span>

<span class="token comment">-- 修改隔离级别</span>
<span class="token keyword">set</span> <span class="token keyword">global</span> <span class="token keyword">transaction</span> <span class="token keyword">isolation</span> <span class="token keyword">level</span> <span class="token keyword">serializable</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ol><li>read committed;       读已经提交的
<ul><li>只能读取到另外一个事务已提交的数据，中间若有其它的提交还是会出问题。</li></ul></li> <li>repeatable read;      可以重复读
<ul><li>事务 A 提交数据，事务 B 读取不到，事务 B 插入 A 同 id 的数据就会报错，这叫（幻读）</li> <li>幻读：事务 A 和事务 B 同时操作一张表，事务 A 提交的数据，事务 B 也不能被读到。</li></ul></li> <li>serializable              串行化
<ul><li>同一张表，事务 A 提交前，其它事务的操作会进入排队状态，等待事务 A 结果后。</li> <li>性能特差</li></ul></li> <li>性能：read uncommitted &gt; read committed &gt; repeatable read &gt; serializable。
<ul><li>mysql 默认隔离级别 repeatable read</li></ul></li></ol> <h2 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h2> <p><a href="https://dev.mysql.com/downloads/mysql/" target="_blank" rel="noopener noreferrer">MySQL Community Serer<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br> <a href="https://blog.csdn.net/bobo553443/article/details/81383194" target="_blank" rel="noopener noreferrer">超详细MySQL安装及基本使用教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="custom-block info"><p class="custom-block-title">温馨提示：</p> <ol><li>仅安装 server-only</li> <li>选择mysql.5x密码验证</li> <li>测试是否安装成功
<ul><li>打开mysql cline</li> <li>输入帐号密码进入数据库</li> <li>忘记密码请重新安装</li></ul></li> <li>安装 navicat，打开 PatchNavicat.exe</li></ol></div> <h3 id="数据库可视化工具"><a href="#数据库可视化工具" class="header-anchor">#</a> 数据库可视化工具</h3> <ol><li><p>可视化工具WorkBench:
<a href="https://dev.mysql.com/downloads/workbench/" target="_blank" rel="noopener noreferrer">MySQL Workbench<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br> <a href="http://c.biancheng.net/view/2625.html" target="_blank" rel="noopener noreferrer">MySQL Workbench使用教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br>
优势:
~创建数据库时,流程化操作，先建数据库,再给用户赋权限,即可(建议使用);
~创建表时,内容详细，容易操作;
~进行数据库内容的导出导入操作，很方便;
~数据访问异常，也能够捕捉到，很实用;
~其他优势，再进行实际的开发中，一一呈现.
劣势:
~有时候，会突然出现卡死的现象(初步觉得原因是数据量过大,不好避免)(这个是实际中，经常遇到的问题，最好的方法，重启数据库可视化工具);
~当数据量过大的时候，不能够完全呈现所有数据;</p></li> <li><p>可视化工具Navicat:
<a href="http://www.navicat.com.cn/store/navicat-premium" target="_blank" rel="noopener noreferrer">Navicat Premium<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br> <a href="https://www.netcats.cn/?p=906" target="_blank" rel="noopener noreferrer">你懂的<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br>
优势:
~数据量过大，能够完整呈现所有的数据;
~导出为excel表格，很方便，或者是txt文件，也很方便;
~安装汉化版的会更好，更容易操作.Navicat汉化版安装详情
劣势:
~创建表的时候，不是很容易阅读;
~做筛选的时候，想进行多表的查询，比较困难;
~以后有新的理解，会加以新的补充;</p></li></ol> <h2 id="端口"><a href="#端口" class="header-anchor">#</a> 端口</h2> <p>1、mysql的默dao认端口是3306，可du以编辑用户目录下的zhi .my.cnf 文件进行修改；<br>
2、daosqlserver默认专端属口号为：1433；<br>
3、oracle默认端口号为：1521；<br>
4、DB2默认端口号为：5000；<br>
5、PostgreSQL默认端口号为：5432。</p> <h2 id="将mysql安装到d盘后如何启动"><a href="#将mysql安装到d盘后如何启动" class="header-anchor">#</a> 将mysql安装到D盘后如何启动</h2> <p>如果把 mysql安装到d:\mysql，而不是缺省的c:\mysql下，则mysql是不能启动的</p> <p>要在MySQL 的my.ini内加上这句话就ok<br>
建立一个文件c:\mysql.cnf，内容是</p> <blockquote><p>[mysqld]<br>
#set basedir to the installationpath<br>
basedir=d:/mysql<br>
datadir=d:/mysql/data<br>
然后启动mysql，就可以了</p></blockquote> <h2 id="mysql架构"><a href="#mysql架构" class="header-anchor">#</a> MySQL架构</h2> <ul><li>要体现在存储引擎的架构上，<strong>插件式的存储引擎架构将查询处理和其它的系统任务以及数据的存储提取相分离</strong>。</li> <li><strong>连接层</strong>：最上层是一些客户端和连接服务。<strong>主要完成一些类似于连接处理、授权认证、及相关的安全方案</strong>。在该层上引入了线程池的概念，为通过认证安全接入的客户端提供线程。同样在该层上可以实现基于SSL的安全链接。服务器也会为安全接入的每个客户端验证它所具有的操作权限。</li> <li><strong>服务层</strong>：第二层服务层，主要完成大部分的核心服务功能， 包括查询解析、分析、优化、缓存、以及所有的内置函数，所有跨存储引擎的功能也都在这一层实现，包括触发器、存储过程、视图等</li> <li><strong>引擎层</strong>：第三层存储引擎层，存储引擎真正的负责了MySQL中数据的存储和提取，服务器通过API与存储引擎进行通信。不同的存储引擎具有的功能不同，这样我们可以根据自己的实际需要进行选取</li> <li><strong>存储层</strong>：第四层为数据存储层，主要是将数据存储在运行于该设备的文件系统之上，并完成与存储引擎的交互</li></ul> <blockquote><p>客户端请求 ---&gt; 连接器（验证用户身份，给予权限）  ---&gt; 查询缓存（存在缓存则直接返回，不存在则执行后续操作） ---&gt; 分析器（对SQL进行词法分析和语法分析操作）  ---&gt; 优化器（主要对执行的sql优化选择最优的执行方案方法）  ---&gt; 执行器（执行时会先看用户是否有执行权限，有才去使用这个引擎提供的接口） ---&gt; 去引擎层获取数据返回（如果开启查询缓存则会缓存查询结果）图：极客时间</p></blockquote> <p><img src="https://kasumi64.gitee.io/web/image-host/manual/MySQL%E6%9E%B6%E6%9E%84%E5%9B%BE.webp" alt="MySQL 架构图"></p> <h2 id="存储引擎"><a href="#存储引擎" class="header-anchor">#</a> 存储引擎</h2> <p>存储引擎是MySQL的组件，用于处理不同表类型的SQL操作。不同的存储引擎提供不同的存储机制、索引技巧、锁定水平等功能，使用不同的存储引擎，还可以获得特定的功能。</p> <h3 id="查看存储引擎"><a href="#查看存储引擎" class="header-anchor">#</a> 查看存储引擎</h3> <div class="language-dart line-numbers-mode"><pre class="language-dart"><code><span class="token operator">--</span> 查看支持的存储引擎
SHOW ENGINES

<span class="token operator">--</span> 查看默认存储引擎
SHOW VARIABLES LIKE <span class="token string">'storage_engine'</span>

<span class="token operator">--</span>查看具体某一个表所使用的存储引擎，这个默认存储引擎被修改了！
<span class="token keyword">show</span> create table tablename

<span class="token operator">--</span>准确查看某个数据库中的某一表所使用的存储引擎
<span class="token keyword">show</span> table status like <span class="token string">'tablename'</span>
<span class="token keyword">show</span> table status from database where name<span class="token operator">=</span><span class="token string">&quot;tablename&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="设置存储引擎"><a href="#设置存储引擎" class="header-anchor">#</a> 设置存储引擎</h3> <div class="language-cpp line-numbers-mode"><pre class="language-cpp"><code><span class="token operator">--</span> 建表时指定存储引擎。默认的就是INNODB，不需要设置
CREATE TABLE <span class="token function">t1</span> <span class="token punctuation">(</span>i INT<span class="token punctuation">)</span> ENGINE <span class="token operator">=</span> INNODB<span class="token punctuation">;</span>
CREATE TABLE <span class="token function">t2</span> <span class="token punctuation">(</span>i INT<span class="token punctuation">)</span> ENGINE <span class="token operator">=</span> CSV<span class="token punctuation">;</span>
CREATE TABLE <span class="token function">t3</span> <span class="token punctuation">(</span>i INT<span class="token punctuation">)</span> ENGINE <span class="token operator">=</span> MEMORY<span class="token punctuation">;</span>

<span class="token operator">--</span> 修改存储引擎cpp
ALTER TABLE t ENGINE <span class="token operator">=</span> InnoDB<span class="token punctuation">;</span>

<span class="token operator">--</span> 修改默认存储引擎，也可以在配置文件my<span class="token punctuation">.</span>cnf中修改默认引擎
SET default_storage_engine<span class="token operator">=</span>NDBCLUSTER<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last update:</span> <span class="time">December 11, 2020 17:43</span></div></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/web/handbooks/guide/Node-MySQL/">
        Node-MySQL
        <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" class="icon next-icon"><path d="M906.772 512c0 4.772-2.211 9.267-5.99 12.175L524.257 813.66a15.37 15.37 0 01-18.616.092 15.368 15.368 0 01-5.038-17.91l75.714-191.672h-443.73c-8.488 0-15.36-6.881-15.36-15.36v-153.6c0-8.489 6.872-15.36 15.36-15.36h443.73l-75.714-191.682a15.358 15.358 0 015.048-17.91c5.51-4.158 13.128-4.137 18.606.092l376.525 289.485a15.323 15.323 0 015.99 12.165z" fill="currentColor"></path></svg></a></span></p></div> <!----> </main> <!----></div><div class="global-ui"><!----><!----><div id="pwa-install"><!----> <div id="install-modal-wrapper" style="display:none;"><div class="background"></div> <div class="install-modal"><div class="header"><button aria-label="Close" class="close-button"><svg width="23" height="22" xmlns="http://www.w3.org/2000/svg" class="icon close-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.12.358a1.224 1.224 0 011.729 0l8.92 8.914L20.686.358a1.224 1.224 0 011.73 1.728L13.497 11l8.92 8.913a1.222 1.222 0 11-1.73 1.729l-8.919-8.913-8.92 8.913a1.224 1.224 0 01-1.729-1.729L10.04 11l-8.92-8.914a1.222 1.222 0 010-1.728z" fill="currentColor"></path></svg></button> <div class="logo"><!----> <div class="title"><h1></h1> <p class="desc">This app can be installed on your PC or mobile device.  This will allow this web app to look and behave like any other installed app.  You will find it in your app lists and be able to pin it to your home screen, start menus or task bars.  This installed web app will also be able to safely interact with other apps and your operating system. </p></div></div></div> <div class="content"><div class="highlight"><!----> <!----></div> <div class="description"><h3>Description</h3> <p></p></div></div> <div class="button-wrapper"><button class="install-button">
        Install <span></span></button> <button class="cancel-button">
        Cancel
      </button></div></div></div></div><div tabindex="-1" role="dialog" aria-hidden="true" class="pswp"><div class="pswp__bg"></div> <div class="pswp__scroll-wrap"><div class="pswp__container"><div class="pswp__item"></div> <div class="pswp__item"></div> <div class="pswp__item"></div></div> <div class="pswp__ui pswp__ui--hidden"><div class="pswp__top-bar"><div class="pswp__counter"></div> <button title="Close (Esc)" class="pswp__button pswp__button--close"></button> <button title="Share" class="pswp__button pswp__button--share"></button> <button title="Toggle fullscreen" class="pswp__button pswp__button--fs"></button> <button title="Zoom in/out" class="pswp__button pswp__button--zoom"></button> <div class="pswp__preloader"><div class="pswp__preloader__icn"><div class="pswp__preloader__cut"><div class="pswp__preloader__donut"></div></div></div></div></div> <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class="pswp__share-tooltip"></div></div> <button title="Previous (arrow left)" class="pswp__button pswp__button--arrow--left"></button> <button title="Next (arrow right)" class="pswp__button pswp__button--arrow--right"></button> <div class="pswp__caption"><div class="pswp__caption__center"></div></div></div></div></div><div id="live2d-widget" class="live2d-widget-container" style="position:fixed;right:65px;bottom:0px;width:135px;height:300px;z-index:99999;opacity:0.8;pointer-events:none;"><canvas id="live2d_canvas" width="135" height="300" class="live2d_canvas" style="position:absolute;left:0px;top:0px;width:135px;height:300px;"></canvas></div></div></div>
    <script src="/web/handbooks/assets/js/app.34fee4e2.js" defer></script><script src="/web/handbooks/assets/js/layout-Layout.e2428f23.js" defer></script><script src="/web/handbooks/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound.6b13e837.js" defer></script><script src="/web/handbooks/assets/js/vendors~layout-Blog~layout-Layout~layout-NotFound~layout-Slide.2463fd57.js" defer></script><script src="/web/handbooks/assets/js/vendors~layout-Blog~layout-Layout.80e40fa9.js" defer></script><script src="/web/handbooks/assets/js/page-MySql手册--2b8d6df0.0579fdb9.js" defer></script>
  </body>
</html>
